import React, { useState, useMemo } from "react";

// Amazon-style frontpage (single-file React component) // Tailwind CSS classes are used for styling. This component is ready to drop into // a React + Tailwind project (e.g. Create React App + Tailwind or Next.js + Tailwind). // Features: // - Top search bar + logo + cart // - Category navigation // - Hero carousel (static slides) // - Product grid with filtering by category + search // - "Suggested for you" and "You may also like" sections // - Product quick view modal // - Cart drawer and Cash-on-Delivery (COD) order form

export default function AmazonLikeFrontpage() { // sample product dataset const initialProducts = [ { id: 1, name: "Samsung Galaxy A14", category: "Mobile", price: 180, img: "https://via.placeholder.com/400x300?text=Samsung+A14", rating: 4.3 }, { id: 2, name: "iPhone 12", category: "Mobile", price: 450, img: "https://via.placeholder.com/400x300?text=iPhone+12", rating: 4.6 }, { id: 3, name: "Men's T-Shirt", category: "Fashion", price: 15, img: "https://via.placeholder.com/400x300?text=T-shirt", rating: 4.1 }, { id: 4, name: "Ladies Dress", category: "Fashion", price: 28, img: "https://via.placeholder.com/400x300?text=Dress", rating: 4.5 }, { id: 5, name: "Rice 5kg", category: "Grocery", price: 12, img: "https://via.placeholder.com/400x300?text=Rice+5kg", rating: 4.0 }, { id: 6, name: "Cooking Oil 1L", category: "Grocery", price: 5, img: "https://via.placeholder.com/400x300?text=Oil+1L", rating: 3.9 }, { id: 7, name: "Wireless Earbuds", category: "Electronics", price: 25, img: "https://via.placeholder.com/400x300?text=Earbuds", rating: 4.2 }, { id: 8, name: "Running Shoes", category: "Fashion", price: 40, img: "https://via.placeholder.com/400x300?text=Shoes", rating: 4.4 }, { id: 9, name: "Bluetooth Speaker", category: "Electronics", price: 30, img: "https://via.placeholder.com/400x300?text=Speaker", rating: 4.0 }, ];

const categories = ["All", "Mobile", "Fashion", "Grocery", "Electronics"];

// UI state const [products] = useState(initialProducts); const [query, setQuery] = useState(""); const [activeCategory, setActiveCategory] = useState("All"); const [selectedProduct, setSelectedProduct] = useState(null); const [cart, setCart] = useState([]); const [isCartOpen, setIsCartOpen] = useState(false); const [isCodOpen, setIsCodOpen] = useState(false);

// Derived lists const filteredProducts = useMemo(() => { const q = query.trim().toLowerCase(); return products.filter((p) => { const matchCategory = activeCategory === "All" || p.category === activeCategory; const matchQuery = q === "" || p.name.toLowerCase().includes(q); return matchCategory && matchQuery; }); }, [products, query, activeCategory]);

const suggested = useMemo(() => products.slice(6, 8), [products]); const recommended = useMemo(() => products.slice(2, 4), [products]);

// cart helpers function addToCart(product) { setCart((c) => { const found = c.find((x) => x.id === product.id); if (found) return c.map((x) => (x.id === product.id ? { ...x, qty: x.qty + 1 } : x)); return [...c, { ...product, qty: 1 }]; }); }

function removeFromCart(id) { setCart((c) => c.filter((x) => x.id !== id)); }

function changeQty(id, qty) { if (qty <= 0) return removeFromCart(id); setCart((c) => c.map((x) => (x.id === id ? { ...x, qty } : x))); }

function openProduct(product) { setSelectedProduct(product); }

function checkoutCOD() { setIsCodOpen(true); setIsCartOpen(false); }

// markup return ( <div className="min-h-screen bg-gray-50 text-gray-900"> {/* TOP NAV */} <header className="bg-white shadow-sm sticky top-0 z-40"> <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <div className="flex items-center justify-between h-16"> <div className="flex items-center gap-4"> <div className="text-2xl font-extrabold text-indigo-600">MyShop</div> <nav className="hidden md:flex gap-2"> {categories.map((c) => ( <button key={c} onClick={() => setActiveCategory(c)} className={px-3 py-1 rounded-md text-sm ${activeCategory === c ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-gray-100'}} > {c} </button> ))} </nav> </div>

<div className="flex-1 mx-6">
          <div className="relative">
            <input
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              className="w-full border rounded-md py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="Search products, brands and more..."
            />
            <div className="absolute left-3 top-2.5 text-gray-400">üîç</div>
          </div>
        </div>

        <div className="flex items-center gap-4">
          <button
            onClick={() => setIsCartOpen(true)}
            className="relative inline-flex items-center px-3 py-2 border rounded-md bg-white text-sm hover:bg-gray-50"
          >
            üõí Cart
            {cart.length > 0 && (
              <span className="ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full">{cart.reduce((s, i) => s + i.qty, 0)}</span>
            )}
          </button>

          <button className="px-3 py-2 bg-yellow-400 rounded-md text-sm">Sign in</button>
        </div>
      </div>
    </div>
  </header>

  {/* HERO + Categories for small screens */}
  <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <section className="grid grid-cols-1 lg:grid-cols-4 gap-6">
      <div className="lg:col-span-3">
        {/* HERO CAROUSEL (static) */}
        <div className="rounded-lg overflow-hidden shadow-md">
          <div className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-8 md:p-12">
            <h1 className="text-3xl md:text-4xl font-bold">Discover great deals, every day</h1>
            <p className="mt-2 text-sm md:text-base opacity-90">Huge selection, fast delivery, and trusted sellers.</p>
          </div>
          <div className="grid grid-cols-2 sm:grid-cols-4 gap-2 p-4 bg-white">
            {products.slice(0, 4).map((p) => (
              <div key={p.id} className="p-2 bg-gray-50 rounded">
                <img src={p.img} alt={p.name} className="w-full h-28 object-cover rounded" />
              </div>
            ))}
          </div>
        </div>

        {/* SUGGESTED FOR YOU */}
        <section className="mt-6">
          <div className="flex items-center justify-between">
            <h2 className="text-xl font-semibold">Suggested for you</h2>
            <button className="text-sm text-indigo-600">See all</button>
          </div>
          <div className="mt-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            {suggested.map((p) => (
              <article key={p.id} className="bg-white rounded-lg p-4 shadow-sm">
                <img src={p.img} alt={p.name} className="w-full h-36 object-cover rounded" />
                <h3 className="mt-2 font-medium text-sm">{p.name}</h3>
                <div className="mt-1 flex items-center justify-between">
                  <span className="font-bold">${p.price}</span>
                  <button
                    onClick={() => addToCart(p)}
                    className="px-2 py-1 bg-green-600 text-white rounded text-sm"
                  >Add</button>
                </div>
              </article>
            ))}
          </div>
        </section>

        {/* PRODUCT GRID (search + category results) */}
        <section className="mt-6">
          <div className="flex items-center justify-between">
            <h2 className="text-xl font-semibold">{activeCategory === 'All' ? 'All Products' : activeCategory}</h2>
            <div className="text-sm text-gray-600">{filteredProducts.length} results</div>
          </div>

          <div className="mt-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            {filteredProducts.map((p) => (
              <div key={p.id} className="bg-white rounded-lg p-3 shadow-sm flex flex-col">
                <button onClick={() => openProduct(p)} className="block w-full">
                  <img src={p.img} alt={p.name} className="w-full h-36 object-cover rounded" />
                  <h3 className="mt-2 font-medium text-sm text-left">{p.name}</h3>
                </button>
                <div className="mt-2 flex items-center justify-between">
                  <div>
                    <div className="font-bold">${p.price}</div>
                    <div className="text-xs text-gray-500">{p.rating} ‚òÖ</div>
                  </div>
                  <div className="flex flex-col gap-2">
                    <button onClick={() => addToCart(p)} className="px-3 py-1 bg-yellow-400 rounded-md text-sm">Add to cart</button>
                    <button onClick={() => { addToCart(p); checkoutCOD(); }} className="px-3 py-1 bg-green-600 text-white rounded-md text-sm">Cash on Delivery</button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>

        {/* YOU MAY ALSO LIKE */}
        <section className="mt-8">
          <div className="flex items-center justify-between">
            <h2 className="text-xl font-semibold">You may also like</h2>
            <button className="text-sm text-indigo-600">Refresh</button>
          </div>
          <div className="mt-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
            {recommended.map((p) => (
              <article key={p.id} className="bg-white rounded-lg p-4 shadow-sm">
                <img src={p.img} alt={p.name} className="w-full h-36 object-cover rounded" />
                <h3 className="mt-2 font-medium text-sm">{p.name}</h3>
                <div className="mt-1 flex items-center justify-between">
                  <span className="font-bold">${p.price}</span>
                  <button onClick={() => addToCart(p)} className="px-2 py-1 bg-green-600 text-white rounded text-sm">Add</button>
                </div>
              </article>
            ))}
          </div>
        </section>
      </div>

      {/* RIGHT SIDEBAR - categories & deals */}
      <aside className="hidden lg:block">
        <div className="bg-white p-4 rounded-lg shadow-sm">
          <h3 className="font-semibold">All Categories</h3>
          <ul className="mt-3 space-y-2 text-sm">
            {categories.slice(1).map((c) => (
              <li key={c}>
                <button onClick={() => setActiveCategory(c)} className="text-left w-full hover:text-indigo-600">{c}</button>
              </li>
            ))}
          </ul>
        </div>

        <div className="mt-4 bg-white p-4 rounded-lg shadow-sm">
          <h3 className="font-semibold">Today's Deals</h3>
          <div className="mt-3 space-y-2">
            {products.slice(0, 3).map((p) => (
              <div key={p.id} className="flex items-center gap-3">
                <img src={p.img} alt={p.name} className="w-16 h-12 object-cover rounded" />
                <div className="text-sm">
                  <div className="font-medium">{p.name}</div>
                  <div className="text-xs text-gray-500">${p.price}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </aside>
    </section>
  </main>

  {/* PRODUCT QUICK VIEW MODAL */}
  {selectedProduct && (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
      <div className="bg-white rounded-lg max-w-2xl w-full p-6">
        <div className="flex gap-6">
          <img src={selectedProduct.img} alt="" className="w-1/3 h-48 object-cover rounded" />
          <div className="flex-1">
            <h3 className="text-xl font-semibold">{selectedProduct.name}</h3>
            <div className="mt-2 text-gray-600">Category: {selectedProduct.category}</div>
            <div className="mt-2 font-bold text-2xl">${selectedProduct.price}</div>
            <div className="mt-4 flex gap-2">
              <button onClick={() => { addToCart(selectedProduct); setSelectedProduct(null); }} className="px-4 py-2 bg-yellow-400 rounded">Add to cart</button>
              <button onClick={() => { addToCart(selectedProduct); checkoutCOD(); setSelectedProduct(null); }} className="px-4 py-2 bg-green-600 text-white rounded">Cash on Delivery</button>
              <button onClick={() => setSelectedProduct(null)} className="px-4 py-2 border rounded">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  )}

  {/* CART DRAWER */}
  <div className={fixed right-0 top-0 h-full w-full md:w-96 bg-white shadow-xl transform transition-transform z-50 ${isCartOpen ? 'translate-x-0' : 'translate-x-full'}}>
    <div className="p-4 flex items-center justify-between border-b">
      <h3 className="text-lg font-semibold">Your cart</h3>
      <div className="flex gap-2">
        <button onClick={() => setIsCartOpen(false)} className="px-3 py-1 border rounded">Close</button>
        <button onClick={checkoutCOD} className="px-3 py-1 bg-green-600 text-white rounded">Cash on Delivery</button>
      </div>
    </div>
    <div className="p-4 overflow-y-auto h-[calc(100%-88px)]">
      {cart.length === 0 ? (
        <div className="text-center text-gray-500">Your cart is empty</div>
      ) : (
        <div className="space-y-4">
          {cart.map((item) => (
            <div key={item.id} className="flex items-center gap-3">
              <img src={item.img} className="w-16 h-12 object-cover rounded" />
              <div className="flex-1">
                <div className="font-medium">{item.name}</div>
                <div className="text-sm text-gray-500">${item.price} x {item.qty}</div>
                <div className="mt-2 flex gap-2">
                  <button onClick={() => changeQty(item.id, item.qty - 1)} className="px-2 py-1 border rounded">-</button>
                  <button onClick={() => changeQty(item.id, item.qty + 1)} className="px-2 py-1 border rounded">+</button>
                  <button onClick={() => removeFromCart(item.id)} className="px-2 py-1 text-red-600">Remove</button>
                </div>
              </div>
            </div>
          ))}

          <div className="border-t pt-4">
            <div className="flex justify-between font-semibold">Total <span>${cart.reduce((s, i) => s + i.price * i.qty, 0)}</span></div>
            <div className="mt-3">
              <button onClick={checkoutCOD} className="w-full px-4 py-2 bg-green-600 text-white rounded">Proceed with Cash on Delivery</button>
            </div>
          </div>
        </div>
      )}
    </div>
  </div>

  {/* COD FORM MODAL */}
  {isCodOpen && (
    <div className="fixed inset-0 z-60 flex items-center justify-center bg-black/60 p-4">
      <div className="bg-white rounded-lg max-w-md w-full p-6">
        <h3 className="text-lg font-semibold">Cash on Delivery - Place Order</h3>
        <p className="text-sm text-gray-600 mt-1">Enter delivery details below. (This example doesn't send data to a server.)</p>
        <form onSubmit={(e) => { e.preventDefault(); alert('Order received! (demo)'); setIsCodOpen(false); setCart([]); }} className="mt-4 space-y-3">
          <input required name="name" placeholder="Full name" className="w-full border rounded px-3 py-2" />
          <input required name="phone" placeholder="Phone number" className="w-full border rounded px-3 py-2" />
          <textarea required name="address" placeholder="Delivery address" className="w-full border rounded px-3 py-2"></textarea>
          <div className="flex gap-2">
            <button type="submit" className="flex-1 bg-green-600 text-white px-4 py-2 rounded">Place Order</button>
            <button type="button" onClick={() => setIsCodOpen(false)} className="flex-1 border px-4 py-2 rounded">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  )}

  <footer className="mt-12 bg-white border-t">
    <div className="max-w-7xl mx-auto px-4 py-6 text-sm text-gray-600">¬© MyShop ‚Ä¢ Built as an Amazon-style demo</div>
  </footer>
</div>

); }
